document.addEventListener("DOMContentLoaded",function(){const e=function(){const e=new XMLHttpRequest;e.open("POST","sql/preload.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.addEventListener("readystatechange",function(){if(4===e.readyState&&200===e.status){const t=JSON.parse(e.response);if(t.centRate){const n="mark"+t.centRate;document.getElementById(n).checked=!0,document.getElementById("rating-num").textContent=t.valueCount}}}),e.send()};e();var t;for(t=0;t<5;t++){const n=document.querySelectorAll(".ajax-rating")[t],o=function(){const t=n.dataset.rating,o=new XMLHttpRequest,s="markRate="+t;o.open("POST","sql/update.php",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.addEventListener("readystatechange",function(){if(4===o.readyState&&200===o.status){const t=JSON.parse(o.response);t.error&&alert(t.error),t.markRate&&(e(),alert("Ваша оценка учтена"))}}),o.send(s)};n.addEventListener("click",o)}const s=document.getElementById("progress-btn"),a=function(){const e=document.getElementById("progress-plus").value,t=document.getElementById("progress-num"),n=document.getElementById("progress-line"),o=parseInt(e),s=parseInt(t.innerText),a=o+s;a>=100?(n.style.width="100%",t.textContent="100"):(n.style.width=a+"%",t.textContent=a)};s.addEventListener("click",a)});